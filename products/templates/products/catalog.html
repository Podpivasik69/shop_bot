{% extends "base.html" %}
{% load humanize %}
{% load static %}
{% block title %}SKET Shop - Каталог{% endblock %}

{% block content %}
<!-- Горизонтальный скролл категорий -->
<div class="categories-scroll">
    <!-- Категория "Все" -->
    <a href="?category=" class="category-item clickable {% if not active_category %}active{% endif %}">
        Все
    </a>

    <!-- Список категорий -->
    {% for category in categories %}
    <a href="?category={{ category.slug }}"
       class="category-item clickable {% if active_category == category.slug %}active{% endif %}">
        {{ category.name }}
    </a>
    {% endfor %}
</div>

<!-- Сетка товаров -->
<div class="products-grid">
    {% for product in products %}
    <div class="product-card clickable" onclick="window.location.href='{% url 'products:product_detail' product.id %}'">
        <!-- Фото товара -->
        <img src="{{ product.main_image.url }}" alt="{{ product.name }}">

        <!-- Информация о товаре -->
        <div class="product-info">
            <h3 class="product-name">{{ product.name }}</h3>
            <p class="product-price">{{ product.price|floatformat:"0"|intcomma }} ₽</p>

            <!-- Блок наличия -->
            <div class="product-availability">
                {% if product.availability_type == 'preorder' %}
                <span class="badge preorder">Предзаказ</span>
                {% else %}
                <span class="badge in-stock">В наличии: {{ product.stock_quantity }} шт.</span>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
{% block extra_js %}
{% endblock %}