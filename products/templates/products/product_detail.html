<!-- products/templates/products/product_detail.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product.name }} - SKET</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'products/css/product_detail.css' %}">
</head>
<body>
<!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" -->
<a href="#" id="back-to-catalog" onclick="goBackToCatalog(event); return false;">
    ‚Üê
</a>
<div class="product-detail">
    <!-- –ì–∞–ª–µ—Ä–µ—è -->
    <div class="gallery-container">
        <div class="gallery-track" id="gallery-track">
            <div class="slide">
                <img src="{{ product.main_image.url }}" alt="{{ product.name }}">
            </div>
            {% for image in product.additional_images.all %}
            <div class="slide">
                <img src="{{ image.image.url }}" alt="{{ product.name }}">
            </div>
            {% endfor %}
        </div>

        <div class="gallery-indicator">
            <span id="current-slide">1</span>
            <span>/</span>
            <span id="total-slides">{{ product.additional_images.all|length|add:1 }}</span>
        </div>
    </div>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <h1 class="product-title">{{ product.name }}</h1>

    <!-- –û–¢–î–ï–õ–¨–ù–´–ô –ë–õ–û–ö –¶–ï–ù–´ -->
    <div class="price-block">
        <div class="price-row">
            <div class="product-price">{{ product.price|floatformat:"0" }} ‚ÇΩ</div>
        </div>
    </div>

    <!-- –ù–û–í–´–ô –ë–õ–û–ö: –ù–ê–õ–ò–ß–ò–ï –¢–û–í–ê–†–ê -->
    <div class="availability-block">
        {% if product.availability_type == 'preorder' %}
        <div class="availability-badge preorder">
            ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø—Ä–µ–¥–∑–∞–∫–∞–∑–∞
        </div>
        {% else %}
        <div class="availability-badge in-stock">
            ‚úÖ –í –Ω–∞–ª–∏—á–∏–∏: {{ product.stock_quantity }} —à—Ç.
        </div>
        {% endif %}
    </div>
    <!-- –ö–û–ù–ï–¶ –ë–õ–û–ö–ê –ù–ê–õ–ò–ß–ò–Ø -->

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="info-card">
        <div class="meta-item">
            <span class="label">–°–æ—Å—Ç–æ—è–Ω–∏–µ</span>
            <span class="value">{{ product.condition }}</span>
        </div>
        <div class="meta-item">
            <span class="label">–†–∞–∑–º–µ—Ä</span>
            <span class="value">{{ product.size }}</span>
        </div>
    </div>

    <!-- –û–¢–î–ï–õ–¨–ù–´–ô –ë–õ–û–ö –û–ü–ò–°–ê–ù–ò–Ø -->
    {% if product.description %}
    <div class="description-block">
        <div class="description-content">
            {{ product.description|linebreaks }}
        </div>
    </div>
    {% endif %}
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–∫—É–ø–∫–∏ -->
<button class="buy-button-fixed" onclick="window.location.href='{% url 'orders:create_order' product.id %}'">
    üõí –ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å
</button>
</body>
<!-- –ü–û–î–ö–õ–Æ–ß–ê–ï–ú –°–ö–†–ò–ü–¢ –° –ì–ê–õ–ï–†–ï–ï–ô –ò –ù–ê–í–ò–ì–ê–¶–ò–ï–ô -->
<script>
    function goBackToCatalog(event) {
        event.preventDefault();

        // –ü—Ä–æ—Å—Ç–æ–π –≤–æ–∑–≤—Ä–∞—Ç (–ø–æ–∫–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏)
        window.history.back();
        return false;
    }
</script>
<script src="{% static 'products/js/product_detail.js' %}"></script>
</html>